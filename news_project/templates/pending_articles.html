{% extends "base.html" %}

{% block title %}Pending Articles{% endblock %}

{% block content %}
<h2 class="mb-4">Pending Articles for Review</h2>

{% if articles %}
  <div class="list-group">

    {% for article in articles %}
      <div class="list-group-item mb-3">

        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h5 class="mb-1">
              <a href="{% url 'article-detail' article.pk %}">
                {{ article.title }}
              </a>
            </h5>
            <small class="text-muted">
              By {{ article.author.username }} â€¢
              {{ article.created_at|date:"M d, Y" }}
            </small>
          </div>

          <span class="badge bg-warning text-dark">
            Pending
          </span>
        </div>

        <p class="mt-2 mb-3">
          {{ article.content|truncatewords:30 }}
        </p>

        <div class="d-flex gap-2">
          <form method="post" action="{% url 'article-approve' article.pk %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-success btn-sm">
              Approve
            </button>
          </form>

          <!-- View full -->
          <a href="{% url 'article-detail' article.pk %}"
             class="btn btn-outline-secondary btn-sm">
            Review
          </a>

          <!-- Delete -->
          <a href="{% url 'article-delete' article.pk %}"
             class="btn btn-outline-danger btn-sm">
            Delete
          </a>
        </div>

      </div>
    {% endfor %}

  </div>
{% else %}
  <div class="alert alert-info">
    No pending articles 
  </div>
{% endif %}
{% endblock %}
